# 设计组件

## 通用组件

通用组件就是自身有一定功能逻辑，且这个逻辑是可以在多个场景下通用的。有可能其中有一些东西在不同场景下是不同的。比如现实的文字、事件、回调函数等。

```js
通用组件 = (可变的内容，事件回调函数) => {
  通用的逻辑 ?=> 触发回调函数

  return UI，显示可变的内容，触发回调函数
}
```

**举例**

倒计时组件：
通用的逻辑：倒计时
可变的部分：总时间，暂停，timeChange回调（当前时间，是否结束），倒计时UI作为默认children

在倒计时的过程中触发timeChange，根据timeChange的结果修改UI，UI可以是个进度条，可以只是一个数字。

上传图片：
通用逻辑：向接口上传文件
可变部分：可选的已上传图片，上传成功的回调返回图片url。

有图片url则显示出来，点击再上传，返回新的url。没有则显示展位UI。

## 封装hooks

白板hook，在canvas上打印笔迹——usePrint。

userPrint接收canvas的ref和所有笔迹lines的数组为参数。

将lines绘制到canvas上，因为有背景图，所以要对lines进行缩放转换，以适应不同的尺寸的显示。

lines是在画线条是产生的。这个hook用于在刷新页面时将lines重绘出来，在老师查看一个学生的作品时，在老师开启一个学生的展示给所有其他学生时。

## storybook

用于开发过程中对组件功能的测试。

对一个插件的不同的参数、参数的组合进行测试。

可以当作测试用例，在后期修改了代码后做验证性测试。

好处：可以提高开发效率。一个组件的某些用例可能需要若干前置条件，如果用传统的办法开发、测试，就需要在页面上进行一些操作，这就会花时间。用了storybook，可以制造出特定的条件来直接测试组件。

坏处：需要学习成本，有学习能力，有写测试的能力。